<!-- Combined Music App + Signup/Login UI (fixed) -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Music App + Auth</title>
  <style>
    :root{ --bg:#0f1724; --card:#0b1220; --accent:#7c3aed; --muted:#94a3b8; --glass: rgba(255,255,255,0.03); --radius:16px; }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#071021 0%, #0f1724 100%);
      color:#e6eef8; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;
    }

    /* Auth panels */
    .panel{
      background:rgba(255,255,255,0.04);
      padding:28px; border-radius:16px; width:100%; max-width:360px; box-shadow:0 10px 30px rgba(2,6,23,0.5);
    }
    h2{margin:0 0 18px}
    label{display:block;margin-top:12px;font-size:14px;color:#cbd5e1}
    input{width:100%; padding:10px; margin-top:6px; border:none; border-radius:10px; background:rgba(255,255,255,0.06); color:#e6eef8}
    .btn{margin-top:18px; width:100%; padding:12px; background:linear-gradient(90deg,var(--accent),#06b6d4); border:none; border-radius:12px; color:#021025; font-weight:700; cursor:pointer}
    .small-link{display:block;text-align:center;margin-top:12px;font-size:13px;color:#94a3b8}
    a{color:var(--accent); text-decoration:none}

    /* MUSIC APP */
    #music-app{ display:none; width:100%; max-width:980px; }
    .player { width:100%; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:var(--radius); padding:22px; display:grid; grid-template-columns: 320px 1fr; gap:20px; box-shadow: 0 10px 30px rgba(2,6,23,0.6); }

    .left{display:flex; flex-direction:column; gap:16px; align-items:center}
    .cover{ width:280px; height:280px; border-radius:12px; background:linear-gradient(135deg,var(--accent), #2dd4bf); display:grid; place-items:center; font-weight:700; font-size:28px; box-shadow:0 8px 24px rgba(15,23,42,0.6); }
    .meta{text-align:center}
    .playlist{background:rgba(255,255,255,0.02); padding:12px; border-radius:12px; max-height:320px; overflow:auto}

    /* --- RESPONSIVE BREAKPOINTS --- */

    /* Tablets */
    @media (max-width:1024px){
      body{ padding:16px; }
      .player{ grid-template-columns: 260px 1fr; padding:18px; }
      .cover{ width:220px; height:220px; }
    }

    /* Large phones / portrait tablets */
    @media (max-width:840px){ 
      .player{grid-template-columns:1fr; text-align:center;}
      .left{ width:100%; }
      .cover{width:180px;height:180px}
      .playlist{max-height:260px}
    }

    /* Phones */
    @media (max-width:600px){
      body{ padding:12px; }
      .panel{ padding:22px; max-width:92%; }
      h2{ font-size:20px }
      .btn{ padding:10px; font-size:15px }
      .player{ padding:16px; gap:14px; }
      .cover{ width:150px; height:150px; font-size:20px; }
      .playlist{ max-height:220px; font-size:14px; }
    }

    /* Small/old phones */
    @media (max-width:420px){
      .panel{ padding:18px; }
      .cover{ width:130px; height:130px; font-size:18px; }
      .player{ padding:12px; }
      .playlist{ max-height:180px; }
    }
  </style>
</head>
<body>

  <!-- LOGIN PANEL -->
  <div id="login-screen" class="panel">
    <h2>Log In</h2>
    <label for="login-name">Name</label>
    <input id="login-name" type="text" autocomplete="username">

    <label for="login-pass">Password</label>
    <input id="login-pass" type="password" autocomplete="current-password">

    <button id="login-btn" class="btn">Login</button>
    <div class="small-link">Don't have an account? <a id="show-signup" href="#">Sign up</a></div>
  </div>

  <!-- SIGNUP PANEL -->
  <div id="signup-screen" class="panel" style="display:none;">
    <h2>Create Account</h2>
    <label for="name-input">Name</label>
    <input id="name-input" type="text" autocomplete="name">

    <label for="password-input">Password</label>
    <input id="password-input" type="password" autocomplete="new-password">

    <button id="signup-btn" class="btn">Sign Up & Enter App</button>
    <div class="small-link">Already have an account? <a id="show-login" href="#">Login</a></div>
  </div>

  <!-- MUSIC APP PANEL (HIDDEN UNTIL AUTHENTICATED) -->
  <div id="music-app">
    <div class="player">

      <div class="left">
        <div class="cover" id="cover">MY MIX</div>
        <div class="meta">
          <div class="title" id="now-title">Track title</div>
          <div class="artist" id="now-artist">Artist</div>
        </div>

        <!-- NEW PLAYBACK CONTROLS -->
        <div class="big-controls" style="display:flex;gap:12px;margin-top:10px;align-items:center;">
          <button id="prev-btn" style="padding:10px 14px;border:none;border-radius:10px;background:var(--glass);color:#fff;cursor:pointer;">âŸµ</button>
          <button id="play-btn" style="padding:12px 20px;border:none;border-radius:12px;background:linear-gradient(90deg,var(--accent),#06b6d4);color:#021025;font-weight:700;cursor:pointer;">â–º</button>
          <button id="next-btn" style="padding:10px 14px;border:none;border-radius:10px;background:var(--glass);color:#fff;cursor:pointer;">âŸ¶</button>
        </div>

        <!-- Shuffle + Repeat -->
        <div style="display:flex;gap:10px;margin-top:8px;">
          <button id="shuffle-btn" style="padding:8px 14px;border:none;border-radius:10px;background:rgba(255,255,255,0.06);color:#fff;cursor:pointer;">Shuffle</button>
          <button id="repeat-btn" style="padding:8px 14px;border:none;border-radius:10px;background:rgba(255,255,255,0.06);color:#fff;cursor:pointer;">Repeat: off</button>
        </div>
          <div class="artist" id="now-artist">Artist</div>
        </div>
        <div style="margin-top:10px; color:#94a3b8; font-size:14px">Welcome, <span id="user-name"></span> ðŸ‘‹ <button id="logout-btn" style='margin-left:10px;padding:6px 12px;border:none;border-radius:8px;background:rgba(255,255,255,0.08);color:#e6eef8;cursor:pointer;'>Logout</button></div>
      </div>

      <div class="right">
        <!-- NEW PROGRESS BAR -->
        <div style="margin-bottom:12px;">
          <div id="progress" style="height:10px;background:rgba(255,255,255,0.05);border-radius:999px;cursor:pointer;position:relative;">
            <div id="progress-bar" style="height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#06b6d4);border-radius:999px;"></div>
          </div>
          <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-top:4px;">
            <span id="current-time">0:00</span>
            <span id="duration">0:00</span>
          </div>
        </div>

        <div class="playlist" id="playlist"></div>
      </div>

    </div>
  </div>

<script>
  // Simple single-user auth using localStorage (for demo purposes only)
  const LS_KEY = 'music_app_user_v1';

  // Panels
  const loginScreen = document.getElementById('login-screen');
  const signupScreen = document.getElementById('signup-screen');
  const musicApp = document.getElementById('music-app');

  // Login elements
  const loginName = document.getElementById('login-name');
  const loginPass = document.getElementById('login-pass');
  const loginBtn = document.getElementById('login-btn');
  const showSignup = document.getElementById('show-signup');

  // Signup elements
  const nameInput = document.getElementById('name-input');
  const passwordInput = document.getElementById('password-input');
  const signupBtn = document.getElementById('signup-btn');
  const showLogin = document.getElementById('show-login');

  // App elements
  const userNameDisplay = document.getElementById('user-name');
  const logoutBtn = document.getElementById('logout-btn');
  const playlistEl = document.getElementById('playlist');

  // Helper: read/write stored user
  function readStoredUser(){
    try{
      const raw = localStorage.getItem(LS_KEY);
      return raw ? JSON.parse(raw) : null;
    }catch(e){ return null; }
  }
  function writeStoredUser(user){
    localStorage.setItem(LS_KEY, JSON.stringify(user));
  }
  function clearStoredUser(){
    localStorage.removeItem(LS_KEY);
  }

  // Show/hide panels
  showSignup.addEventListener('click', (e)=>{ e.preventDefault(); loginScreen.style.display='none'; signupScreen.style.display='block'; });
  showLogin.addEventListener('click', (e)=>{ e.preventDefault(); signupScreen.style.display='none'; loginScreen.style.display='block'; });

  // Signup flow: creates a user and immediately enters the app
  signupBtn.addEventListener('click', ()=>{
    const name = nameInput.value.trim();
    const pass = passwordInput.value;
    if(!name || !pass){ alert('Please fill all fields'); return; }

    const user = { name, pass };
    writeStoredUser(user);
    enterApp(user);
  });

  // Login flow
  loginBtn.addEventListener('click', ()=>{
    const stored = readStoredUser();
    if(!stored){ alert('No account found â€” please sign up first'); return; }
    if(loginName.value === stored.name && loginPass.value === stored.pass){
      enterApp(stored);
    } else {
      alert('Incorrect name or password');
    }
  });

  // Logout
  logoutBtn.addEventListener('click', ()=>{
    musicApp.style.display = 'none';
    // show login screen on logout
    loginScreen.style.display = 'block';
    // clear fields
    loginName.value = '';
    loginPass.value = '';
  });

  // Enter music app UI
  function enterApp(user){
    userNameDisplay.textContent = user.name;
    signupScreen.style.display = 'none';
    loginScreen.style.display = 'none';
    musicApp.style.display = 'block';
    // clear inputs for privacy
    nameInput.value = '';
    passwordInput.value = '';
    loginName.value = '';
    loginPass.value = '';
  }

  // Auto-login if stored user exists? (optional) - we just show login by default
  // populate demo playlist
  const tracks = [
    { title: 'fun', artist: 'Rema', src: 'https://trendybeatz.com/download-mp3/63497/rema-fun' },
    { title: 'kelebu', artist: 'Rema', src: 'Rema-Kelebu-(TrendyBeatz.com).mp3' },
    { title: 'baby is it a crime', artist: 'Rema', src: 'Rema-Baby-Is-It-A-Crime-(TrendyBeatz.com).mp3' }
  ];
  function renderPlaylist(){
    playlistEl.innerHTML = '';
    tracks.forEach((t,i)=>{
      const el = document.createElement('div');
      el.style.padding = '10px';
      el.innerHTML = `<strong>${i+1}.</strong> ${t.title} â€” ${t.artist}`;
      playlistEl.appendChild(el);
    });
  }
  renderPlaylist();

  // --- AUDIO PLAYER LOGIC ---
  const audio = new Audio();
  let currentIndex = -1;

  function playTrack(index){
    currentIndex = index;
    const t = tracks[index];
    audio.src = t.src;
    audio.play();
    document.getElementById('now-title').textContent = t.title;
    document.getElementById('now-artist').textContent = t.artist;
    document.getElementById('cover').textContent = t.title.split(' ')[0];
  }

  function attachPlaylistClicks(){
    const children = playlistEl.children;
    for(let i=0;i<children.length;i++){
      children[i].style.cursor = 'pointer';
      children[i].addEventListener('click', ()=> playTrack(i));
    }
  }

  attachPlaylistClicks();

  /* === FULL PLAYER BEHAVIOR === */
  const playBtn = document.getElementById('play-btn');
  const nextBtn = document.getElementById('next-btn');
  const prevBtn = document.getElementById('prev-btn');
  const shuffleBtn = document.getElementById('shuffle-btn');
  const repeatBtn = document.getElementById('repeat-btn');
  const progress = document.getElementById('progress');
  const progressBar = document.getElementById('progress-bar');
  const currentTimeEl = document.getElementById('current-time');
  const durationEl = document.getElementById('duration');
  let isPlaying = false;
  let shuffle = false;
  let repeatMode = 0; // 0=off,1=one,2=all

  playBtn.addEventListener('click', ()=>{
    if(isPlaying){ audio.pause(); playBtn.textContent='â–º'; }
    else { audio.play(); playBtn.textContent='âšâš'; }
    isPlaying = !isPlaying;
  });

  nextBtn.addEventListener('click', nextTrack);
  prevBtn.addEventListener('click', prevTrack);

  shuffleBtn.addEventListener('click', ()=>{
    shuffle = !shuffle;
    shuffleBtn.style.opacity = shuffle ? 1 : 0.6;
  });

  repeatBtn.addEventListener('click', ()=>{
    repeatMode = (repeatMode+1)%3;
    repeatBtn.textContent = ['Repeat: off','Repeat: one','Repeat: all'][repeatMode];
  });

  function nextTrack(){
    if(shuffle){ playTrack(Math.floor(Math.random()*tracks.length)); return; }
    if(currentIndex < tracks.length-1) playTrack(currentIndex+1);
    else if(repeatMode===2) playTrack(0);
  }

  function prevTrack(){
    if(audio.currentTime>3){ audio.currentTime=0; return; }
    if(currentIndex>0) playTrack(currentIndex-1);
  }

  audio.addEventListener('loadedmetadata', ()=>{
    durationEl.textContent = formatTime(audio.duration);
  });

  audio.addEventListener('timeupdate', ()=>{
    if(audio.duration){
      progressBar.style.width = (audio.currentTime/audio.duration)*100 + '%';
      currentTimeEl.textContent = formatTime(audio.currentTime);
    }
  });

  audio.addEventListener('ended', ()=>{
    if(repeatMode===1){ audio.currentTime=0; audio.play(); return; }
    nextTrack();
  });

  progress.addEventListener('click', (e)=>{
    const rect = progress.getBoundingClientRect();
    const pct = (e.clientX - rect.left) / rect.width;
    if(audio.duration) audio.currentTime = pct * audio.duration;
  });

  function formatTime(sec){
    if(!sec) return '0:00';
    const m = Math.floor(sec/60);
    const s = Math.floor(sec%60).toString().padStart(2,'0');
    return m+":"+s;
  }

  /* Animated cover */
  const cover = document.getElementById('cover');
  audio.addEventListener('play', ()=> cover.style.transform='scale(1.05) rotate(2deg)');
  audio.addEventListener('pause', ()=> cover.style.transform='scale(1) rotate(0deg)');

  // If you'd prefer automatic login when a user exists, uncomment below:
  // const existing = readStoredUser(); if(existing) enterApp(existing);
</script>

</body>
</html>
